var girder_plugin_item_licenses=function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(9),t(t.s=28)}([function(e,t){e.exports=girder_lib},function(e,t,n){e.exports=n(0)(3)},function(e,t,n){e.exports=n(0)(63)},function(e,t,n){e.exports=n(0)(0)},function(e,t,n){e.exports=n(0)(1)},function(e,t,n){e.exports=n(0)(2)},function(e,t,n){e.exports=n(0)(4)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),l=i(s),r=n(19),u=i(r),c=l.default.extend({initialize:function(e){this.licenses=e.licenses,this.currentLicense=e.currentLicense},render:function(){return this.$el.html((0,u.default)({licenses:this.licenses,currentLicense:this.currentLicense})),this}});t.default=c},function(e,t,n){e.exports=n(0)(5)},function(e,t,n){"use strict";n(10),n(12),n(13),n(15),n(16)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(26),l=i(s),r=n(8),u=i(r),c=n(2),a=n(11),o=i(a);(0,c.exposePluginConfig)("item_licenses","plugins/item_licenses/config"),l.default.route("plugins/item_licenses/config","itemLicensesConfig",function(){u.default.trigger("g:navigateTo",o.default)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=i(s),r=n(21),u=i(r),c=n(4),a=i(c),o=n(8),f=i(o),d=n(6),p=n(17),m=i(p);n(20);var h=a.default.extend({events:{"submit #g-item-licenses-settings-form":function(e){e.preventDefault(),this.$("#g-item-licenses-error-message").empty(),this._saveSettings([{key:"item_licenses.licenses",value:this.$("#g-item-licenses").val().trim()}])},"click #g-item-licenses-defaults":function(e){e.preventDefault(),(0,d.restRequest)({method:"GET",url:"item/licenses",data:{default:!0}}).done(l.default.bind(function(e){this.licenses=e,this.render()},this))}},initialize:function(){(0,d.restRequest)({method:"GET",url:"system/setting",data:{list:JSON.stringify(["item_licenses.licenses"])}}).done(l.default.bind(function(e){this.licenses=e["item_licenses.licenses"],this.render()},this))},render:function(){return this.$el.html((0,m.default)({licenses:JSON.stringify(this.licenses,null,4)})),this.breadcrumb=new u.default({pluginName:"Item licenses",el:this.$(".g-config-breadcrumb-container"),parentView:this}).render(),this},_saveSettings:function(e){(0,d.restRequest)({method:"PUT",url:"system/setting",data:{list:JSON.stringify(e)},error:null}).done(l.default.bind(function(){f.default.trigger("g:alert",{icon:"ok",text:"Settings saved.",type:"success",timeout:3e3})},this)).fail(l.default.bind(function(e){this.$("#g-item-licenses-error-message").text(e.responseJSON.message)},this))}});t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(5),l=i(s),r=n(1),u=i(r),c=n(25),a=i(c),o=n(2),f=n(7),d=i(f);(0,o.wrap)(a.default,"render",function(e){if(e.call(this),u.default.has(this.parentView,"licenses")){var t=null;this.item&&this.item.has("license")&&(t=this.item.get("license"));var n=new d.default({licenses:this.parentView.licenses,currentLicense:t,parentView:this}).render();(0,l.default)(".modal-body > .form-group").last().after(n.el),delete this.parentView.licenses}return this}),(0,o.wrap)(a.default,"updateItem",function(e){var t=arguments[1];return t.license=this.$("#g-license").val(),e.call(this,t),this}),(0,o.wrap)(a.default,"createItem",function(e){var t=arguments[1];return t.license=this.$("#g-license").val(),e.call(this,t),this})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(1),l=i(s),r=n(23),u=i(r),c=n(6),a=n(2);(0,a.wrap)(u.default,"uploadDialog",function(e){return(0,c.restRequest)({method:"GET",url:"item/licenses"}).done(l.default.bind(function(t){this.licenses=t,e.call(this)},this)),this}),(0,a.wrap)(u.default,"createItemDialog",function(e){return(0,c.restRequest)({method:"GET",url:"item/licenses"}).done(l.default.bind(function(t){this.licenses=t,e.call(this)},this)),this})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),l=i(s),r=n(18),u=i(r),c=l.default.extend({initialize:function(e){this.item=e.item},render:function(){return this.$el.html((0,u.default)({item:this.item})),this}});t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(5),l=i(s),r=n(1),u=i(r),c=n(27),a=i(c),o=n(6),f=n(2),d=n(14),p=i(d);(0,f.wrap)(a.default,"render",function(e){return this.once("g:rendered",function(){var e=new p.default({item:this.model,parentView:this}).render();(0,l.default)(".g-item-info").append(e.el)},this),e.call(this),this}),(0,f.wrap)(a.default,"editItem",function(e){return(0,o.restRequest)({method:"GET",url:"item/licenses"}).done(u.default.bind(function(t){this.licenses=t,e.call(this)},this)),this})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(5),l=i(s),r=n(1),u=i(r),c=n(22),a=i(c),o=n(24),f=i(o),d=n(2),p=n(7),m=i(p);(0,d.wrap)(f.default,"render",function(e){return e.call(this),u.default.has(this.parentView,"licenses")&&(this.selectLicenseWidget=new m.default({licenses:this.parentView.licenses,parentView:this}).render(),this.modal?(0,l.default)(".modal-body").append(this.selectLicenseWidget.el):(0,l.default)(".g-nonmodal-upload-buttons-container").before(this.selectLicenseWidget.el),delete this.parentView.licenses),this}),(0,d.wrap)(f.default,"uploadNextFile",function(e){if(e.call(this),u.default.has(this,"selectLicenseWidget")){var t=this.currentFile;t&&t.on("g:upload.complete",function(){var e=(0,l.default)("#g-license").val();if(!u.default.isEmpty(e)){new a.default({_id:t.get("itemId"),license:e}).save()}},this)}})},function(e,t,n){"use strict";function i(e){var t,n="",i=e||{};return function(e){n=n+'<div class="g-config-breadcrumb-container"></div><p class="g-item-licenses-description">Configure the available licenses for items.</p><form id="g-item-licenses-settings-form" role="form"><div class="form-group"><label class="control-label" for="g-item-licenses">Licenses</label><textarea class="form-control" id="g-item-licenses">'+s.escape(null==(t=e)?"":t)+'</textarea></div><p class="g-validation-failed-message" id="g-item-licenses-error-message"></p><input class="btn btn-sm btn-primary" type="submit" value="Save"><input class="btn btn-sm btn-default" id="g-item-licenses-defaults" type="button" value="Reset to defaults"></form>'}.call(this,"licenses"in i?i.licenses:"undefined"!=typeof licenses?licenses:void 0),n}var s=n(3);e.exports=i},function(e,t,n){"use strict";function i(e){var t,n="",i=e||{};return function(e){n+='<div class="g-item-license g-info-list-entry"><i class="icon-shield"></i>License:&nbsp;',e.has("license")&&e.get("license").length?n+=s.escape(null==(t=e.get("license"))?"":t):n+="Unspecified",n+="</div>"}.call(this,"item"in i?i.item:"undefined"!=typeof item?item:void 0),n}var s=n(3);e.exports=i},function(e,t,n){"use strict";function i(e){var t,n="",i=e||{};return function(e,i){n+='<div class="g-select-license form-group"><label for="g-license">License</label><select class="form-control input-sm" id="g-license"><option value="">Unspecified</option>',i&&function(){var l=i;if("number"==typeof l.length)for(var r=0,u=l.length;r<u;r++){var c=l[r];n=n+"<optgroup"+s.attr("label",c.category,!0,!0)+">",function(){var i=c.licenses;if("number"==typeof i.length)for(var l=0,r=i.length;l<r;l++){var u=i[l],a=null;u.name===e&&(a="selected"),n=n+"<option"+(s.attr("value",u.name,!0,!0)+s.attr("selected",a,!0,!0))+">"+s.escape(null==(t=u.name)?"":t)+"</option>"}else{var r=0;for(var l in i){r++;var u=i[l],a=null;u.name===e&&(a="selected"),n=n+"<option"+(s.attr("value",u.name,!0,!0)+s.attr("selected",a,!0,!0))+">"+s.escape(null==(t=u.name)?"":t)+"</option>"}}}.call(this),n+="</optgroup>"}else{var u=0;for(var r in l){u++;var c=l[r];n=n+"<optgroup"+s.attr("label",c.category,!0,!0)+">",function(){var i=c.licenses;if("number"==typeof i.length)for(var l=0,r=i.length;l<r;l++){var u=i[l],a=null;u.name===e&&(a="selected"),n=n+"<option"+(s.attr("value",u.name,!0,!0)+s.attr("selected",a,!0,!0))+">"+s.escape(null==(t=u.name)?"":t)+"</option>"}else{var r=0;for(var l in i){r++;var u=i[l],a=null;u.name===e&&(a="selected"),n=n+"<option"+(s.attr("value",u.name,!0,!0)+s.attr("selected",a,!0,!0))+">"+s.escape(null==(t=u.name)?"":t)+"</option>"}}}.call(this),n+="</optgroup>"}}}.call(this),n+="</select></div>"}.call(this,"currentLicense"in i?i.currentLicense:"undefined"!=typeof currentLicense?currentLicense:void 0,"licenses"in i?i.licenses:"undefined"!=typeof licenses?licenses:void 0),n}var s=n(3);e.exports=i},function(e,t){},function(e,t,n){e.exports=n(0)(135)},function(e,t,n){e.exports=n(0)(24)},function(e,t,n){e.exports=n(0)(25)},function(e,t,n){e.exports=n(0)(37)},function(e,t,n){e.exports=n(0)(50)},function(e,t,n){e.exports=n(0)(7)},function(e,t,n){e.exports=n(0)(75)},function(e,t,n){e.exports=n}]);