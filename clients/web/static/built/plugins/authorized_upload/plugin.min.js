var girder_plugin_authorized_upload=function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(5),t(t.s=21)}([function(e,t){e.exports=girder_lib},function(e,t,o){e.exports=o(0)(0)},function(e,t,o){e.exports=o(0)(1)},function(e,t,o){e.exports=o(0)(19)},function(e,t,o){e.exports=o(0)(8)},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}o(6);var i=o(14),n=r(i),a=o(4),l=o(18),d=o(11),u=r(d);(0,l.wrap)(n.default,"render",function(e){return e.call(this),"folder"===this.parentModel.resourceName&&this.parentModel.getAccessLevel()>=a.AccessType.WRITE&&this.$(".g-folder-actions-menu a.g-edit-folder").parent().after((0,u.default)({folder:this.parentModel})),this})},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=o(19),n=r(i),a=o(17),l=r(a),d=o(3),u=r(d),s=o(4),f=o(7),c=r(f),p=o(8),h=r(p);n.default.route("authorize_upload/:folderId","authorizeUpload",function(e){var t=new u.default({_id:e}).once("g:fetched",function(){l.default.trigger("g:navigateTo",c.default,{folder:t})});t.fetch()}),n.default.route("authorized_upload/:folderId/:token","authorizedUpload",function(e,t){l.default.trigger("g:navigateTo",h.default,{token:t,folderId:e},{layout:s.Layout.EMPTY})})},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(2),n=r(i),a=o(16),l=o(9),d=r(l);o(12);var u=n.default.extend({events:{"click .g-create-authorized-upload":function(){var e=this;(0,a.restRequest)({url:"authorized_upload",method:"POST",data:{folderId:this.folder.id,duration:this.$(".g-num-days").val()||30}}).done(function(t){e.$(".g-url-container").removeClass("hide"),e.$(".g-authorized-upload-url-target").val(t.url).select()})}},initialize:function(e){this.folder=e.folder,this.render()},render:function(){return this.$el.html((0,d.default)({folder:this.folder})),this}});t.default=u},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=r(i),a=o(2),l=r(a),d=o(15),u=r(d),s=o(20),f=o(10),c=r(f);o(13);var p=l.default.extend({initialize:function(e){var t=this;this.folder=new n.default({_id:e.folderId,name:""}),(0,s.setCurrentToken)(e.token),this.uploadWidget=new u.default({parent:this.folder,title:!1,multiFile:!1,modal:!1,parentView:this,otherParams:function(){return{authorizedUploadDescription:t.$("#g-authorized-upload-description").val(),authorizedUploadEmail:t.$("#g-authorized-upload-email").val()}}}).on("g:uploadFinished",function(){this.$(".g-upload-wrapper").addClass("hide"),this.$(".g-complete-wrapper").removeClass("hide")},this),this.render()},render:function(){return this.$el.html((0,c.default)()),this.uploadWidget.setElement(this.$(".g-upload-widget-container")).render(),this}});t.default=p},function(e,t,o){"use strict";function r(e){var t,o="",r=e||{};return function(e){o=o+'<div class="g-body-title">Authorize upload into folder <a'+i.attr("href","#folder/"+e.id,!0,!0)+">"+i.escape(null==(t=e.name())?"":t)+'</a></div><p>This will generate a secure URL that can be used to upload a single file into this folder.\n</p><form><div class="form-group"><label>Number of days until URL expires (optional, defaults to lifetime of user sessions)</label><input class="g-num-days form-control"></div></form><btn class="g-create-authorized-upload btn btn-primary"><i class="icon-link"></i> Generate URL</btn><div class="g-url-container hide"><p>Your secure URL is below. Copy this value and send it to the user who will perform the\nupload. They do not need to register a user in order to perform the upload. This token\nwill allow the user to upload a single file to the destination folder.</p><p>You will be notified via email when the upload is complete.</p><input class="g-authorized-upload-url-target form-control" readonly></div>'}.call(this,"folder"in r?r.folder:"undefined"!=typeof folder?folder:void 0),o}var i=o(1);e.exports=r},function(e,t,o){"use strict";function r(e){var t="";return t+='<div class="g-authorized-upload-page-wrapper"><div class="g-upload-wrapper"><p>You have been authorized to upload a file to this server. Please drag and drop your file\nhere, or click the button to select it using a file browser, and then click <b>Start Upload</b>.\n</p><p>You may also include your email address and a description of the data.\n</p><label for="g-authorized-upload-email">Your email address (optional)</label><input class="form-control" id="g-authorized-upload-email" placeholder="Enter email"><label for="g-authorized-upload-description">Description of data (optional)</label><input class="form-control" id="g-authorized-upload-description" placeholder="Enter description"><div class="g-upload-widget-container"></div></div><div class="g-complete-wrapper hide"><p>Thank you! Your file has been received.</p></div></div>'}o(1);e.exports=r},function(e,t,o){"use strict";function r(e){var t="",o=e||{};return function(e){t=t+'<li role="presentation"><a class="g-authorize-upload-here"'+i.attr("href","#authorize_upload/"+e.id,!0,!0)+'><i class="icon-upload"></i>Authorize upload here</a></li>'}.call(this,"folder"in o?o.folder:"undefined"!=typeof folder?folder:void 0),t}var i=o(1);e.exports=r},function(e,t){},function(e,t){},function(e,t,o){e.exports=o(0)(25)},function(e,t,o){e.exports=o(0)(37)},function(e,t,o){e.exports=o(0)(4)},function(e,t,o){e.exports=o(0)(5)},function(e,t,o){e.exports=o(0)(63)},function(e,t,o){e.exports=o(0)(7)},function(e,t,o){e.exports=o(0)(9)},function(e,t,o){e.exports=o}]);