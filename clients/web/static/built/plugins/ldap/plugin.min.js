var girder_plugin_ldap=function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(4),t(t.s=19)}([function(e,t){e.exports=girder_lib},function(e,t,a){e.exports=a(0)(0)},function(e,t,a){e.exports=a(0)(2)},function(e,t,a){e.exports=a(0)(5)},function(e,t,a){"use strict";a(5)},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=a(3),i=r(n),s=a(18),o=r(s),l=a(17),d=a(6),c=r(d);(0,l.exposePluginConfig)("ldap","plugins/ldap/config"),o.default.route("plugins/ldap/config","ldapConfig",function(){i.default.trigger("g:navigateTo",c.default)})},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=r(n),s=a(15),o=r(s),l=a(11),d=r(l),c=a(14),u=r(c),p=a(12),f=r(p),h=a(16),v=a(3),g=r(v),m=a(7),b=r(m),_=a(8),y=r(_);a(9),a(13);var D=["uri","bindName","baseDn","password","searchField"],w=f.default.extend({events:{"submit .g-ldap-server-form":function(e){e.preventDefault(),this.$("#g-ldap-servers-error-message").empty(),this._saveSettings()},"click .g-remove-ldap-server":function(e){(0,i.default)(e.currentTarget).parents(".panel").remove()},"click .g-ldap-add-server":function(){this.$(".g-ldap-server-accordion").append((0,y.default)({server:{collapsedClass:"in"},index:this.$(".g-ldap-server-panel").length}))},"input .g-uri-input":function(e){var t=(0,i.default)(e.currentTarget);t.parents(".panel").find(".g-ldap-server-title").text(t.val())},"click .g-ldap-test":function(e){var t=this,a=(0,i.default)(e.currentTarget),r=a.attr("index"),n=this.$("#g-ldap-server-"+r+"-uri").val(),s=this.$("#g-ldap-server-"+r+"-bindName").val(),o=this.$("#g-ldap-server-"+r+"-password").val();(0,h.restRequest)({url:"system/ldap_server/status",method:"GET",data:{uri:n,bindName:s,password:o}}).done(function(e){a.girderEnable(!0),e.connected?t.$("#g-ldap-server-"+r+"-conn-ok").removeClass("hide"):t.$("#g-ldap-server-"+r+"-conn-fail").removeClass("hide").find(".g-msg").text(e.error)}),a.girderEnable(!1),this.$("#g-ldap-server-"+r+"-conn-ok").addClass("hide"),this.$("#g-ldap-server-"+r+"-conn-fail").addClass("hide")}},initialize:function(){var e=this;(0,h.restRequest)({method:"GET",url:"system/setting",data:{key:"ldap.servers"}}).done(function(t){e.servers=t,e.render()}),this.breadcrumb=new u.default({pluginName:"LDAP login",parentView:this})},render:function(){return this.$el.html((0,b.default)({servers:this.servers})),this.breadcrumb.setElement(this.$(".g-config-breadcrumb-container")).render(),d.default.create(this.$(".g-ldap-server-accordion")[0],{filter:"input",preventOnFilter:!1}),this},_saveSettings:function(){var e=this,t=o.default.map(this.$(".g-ldap-server-panel"),function(e){var t={};return o.default.each(D,function(a){t[a]=(0,i.default)(e).find('input[name="'+a+'"]').val()}),t});this.$(".g-validation-failed-message").empty(),(0,h.restRequest)({method:"PUT",url:"system/setting",data:{key:"ldap.servers",value:JSON.stringify(t)},error:null}).done(function(){g.default.trigger("g:alert",{icon:"ok",text:"Settings saved.",type:"success",timeout:3e3})}).fail(function(t){e.$(".g-validation-failed-message").text(t.responseJSON.message)})}});t.default=w},function(e,t,a){"use strict";function r(e){var t,a="",r={},i=e||{};return function(e){r.ldapServerEditPanel=t=function(e,r){this&&this.block,this&&this.attributes;a=a+'<div class="g-ldap-server-panel panel panel-default"><div class="panel-heading" data-toggle="collapse" data-parent="#g-ldap-server-accordion"'+n.attr("data-target","#g-ldap-server-"+r+"-settings",!0,!0)+'><div class="panel-title pull-left"><a><span class="g-ldap-server-title">'+n.escape(null==(t=e.uri)?"":t)+'</span></a></div><div class="panel-title pull-right"><a class="g-remove-ldap-server" title="Remove this server"><i class="icon-cancel"'+n.attr("id","g-ldap-server-"+r+"-remove",!0,!0)+'></i></a></div><div class="clearfix"></div></div><div'+(n.attr("class",n.classes(["panel-collapse","collapse",e.collapsedClass],[!1,!1,!0]),!1,!0)+n.attr("id","g-ldap-server-"+r+"-settings",!0,!0))+'><div class="panel-body"><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-uri",!0,!0)+'>URI</label><input class="input-sm form-control g-uri-input"'+n.attr("id","g-ldap-server-"+r+"-uri",!0,!0)+' name="uri"'+n.attr("value",e.uri,!0,!0)+' placeholder="URI"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-bindName",!0,!0)+'>Bind name</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-bindName",!0,!0)+' name="bindName"'+n.attr("value",e.bindName,!0,!0)+' placeholder="Bind name"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-baseDn",!0,!0)+'>Base DN</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-baseDn",!0,!0)+' name="baseDn"'+n.attr("value",e.baseDn,!0,!0)+' placeholder="Base DN"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-password",!0,!0)+'>Password (optional)</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-password",!0,!0)+' type="password" name="password"'+n.attr("value",e.password,!0,!0)+' placeholder="Password"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-searchField",!0,!0)+'>Search field (optional)</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-searchField",!0,!0)+' name="searchField"'+n.attr("value",e.searchField,!0,!0)+' placeholder="Search field (default: uid)"></div><div class="form-group"><button class="g-ldap-test btn btn-sm btn-default"'+n.attr("index",r,!0,!0)+' type="button">Test connection</button><div class="g-ldap-test-result hide"'+n.attr("id","g-ldap-server-"+r+"-conn-ok",!0,!0)+' status="success"><i class="icon-ok"></i>Connection OK</div><div class="g-ldap-test-result hide"'+n.attr("id","g-ldap-server-"+r+"-conn-fail",!0,!0)+' status="failure"><i class="icon-cancel"></i><span class="g-msg"></span></div></div></div></div></div>'},a+='<div class="g-config-breadcrumb-container"></div><p>Below is the list of LDAP servers that will attempt to authenticate\nusers when they log into this server. The list below is ordered, and\nthe servers will be checked in that order at login time. To change\nthe order, simply drag and drop the elements in the list.\n\nFull documentation of this plugin and how to configure it can be found\n<a target="_blank" href="http://girder.readthedocs.io/en/latest/plugins.html#ldap-authentication">here</a>.\n</p><div class="g-ldap-server-list-title">LDAP servers</div><form class="g-ldap-server-form" role="form"><div class="panel-group g-ldap-server-accordion">',function(){var t=e;if("number"==typeof t.length)for(var a=0,n=t.length;a<n;a++){var i=t[a];r.ldapServerEditPanel(i,a)}else{var n=0;for(var a in t){n++;var i=t[a];r.ldapServerEditPanel(i,a)}}}.call(this),a+='</div><div class="btn-toolbar"><input class="g-ldap-add-server btn btn-sm btn-primary" type="button" value="New Server"><input class="btn btn-sm btn-primary" type="submit" value="Save"></div></form><p class="g-validation-failed-message"></p>'}.call(this,"servers"in i?i.servers:"undefined"!=typeof servers?servers:void 0),a}var n=a(1);e.exports=r},function(e,t,a){"use strict";function r(e){var t,a="",r={},i=e||{};return function(e,i){r.ldapServerEditPanel=t=function(e,r){this&&this.block,this&&this.attributes;a=a+'<div class="g-ldap-server-panel panel panel-default"><div class="panel-heading" data-toggle="collapse" data-parent="#g-ldap-server-accordion"'+n.attr("data-target","#g-ldap-server-"+r+"-settings",!0,!0)+'><div class="panel-title pull-left"><a><span class="g-ldap-server-title">'+n.escape(null==(t=e.uri)?"":t)+'</span></a></div><div class="panel-title pull-right"><a class="g-remove-ldap-server" title="Remove this server"><i class="icon-cancel"'+n.attr("id","g-ldap-server-"+r+"-remove",!0,!0)+'></i></a></div><div class="clearfix"></div></div><div'+(n.attr("class",n.classes(["panel-collapse","collapse",e.collapsedClass],[!1,!1,!0]),!1,!0)+n.attr("id","g-ldap-server-"+r+"-settings",!0,!0))+'><div class="panel-body"><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-uri",!0,!0)+'>URI</label><input class="input-sm form-control g-uri-input"'+n.attr("id","g-ldap-server-"+r+"-uri",!0,!0)+' name="uri"'+n.attr("value",e.uri,!0,!0)+' placeholder="URI"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-bindName",!0,!0)+'>Bind name</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-bindName",!0,!0)+' name="bindName"'+n.attr("value",e.bindName,!0,!0)+' placeholder="Bind name"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-baseDn",!0,!0)+'>Base DN</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-baseDn",!0,!0)+' name="baseDn"'+n.attr("value",e.baseDn,!0,!0)+' placeholder="Base DN"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-password",!0,!0)+'>Password (optional)</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-password",!0,!0)+' type="password" name="password"'+n.attr("value",e.password,!0,!0)+' placeholder="Password"></div><div class="form-group"><label class="control-label"'+n.attr("for","g-ldap-server-"+r+"-searchField",!0,!0)+'>Search field (optional)</label><input class="input-sm form-control"'+n.attr("id","g-ldap-server-"+r+"-searchField",!0,!0)+' name="searchField"'+n.attr("value",e.searchField,!0,!0)+' placeholder="Search field (default: uid)"></div><div class="form-group"><button class="g-ldap-test btn btn-sm btn-default"'+n.attr("index",r,!0,!0)+' type="button">Test connection</button><div class="g-ldap-test-result hide"'+n.attr("id","g-ldap-server-"+r+"-conn-ok",!0,!0)+' status="success"><i class="icon-ok"></i>Connection OK</div><div class="g-ldap-test-result hide"'+n.attr("id","g-ldap-server-"+r+"-conn-fail",!0,!0)+' status="failure"><i class="icon-cancel"></i><span class="g-msg"></span></div></div></div></div></div>'},r.ldapServerEditPanel(i,e)}.call(this,"index"in i?i.index:"undefined"!=typeof index?index:void 0,"server"in i?i.server:"undefined"!=typeof server?server:void 0),a}var n=a(1);e.exports=r},function(e,t){},,function(e,t,a){(function(r){var n,i;!function(r){"use strict";n=r,void 0!==(i="function"==typeof n?n.call(t,a,t,e):n)&&(e.exports=i)}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=y({},t),e[q]=this;var a={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var r in a)!(r in t)&&(t[r]=a[r]);oe(t);for(var n in this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Q,s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),s(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(s(e,"dragover",this),s(e,"dragenter",this)),ie.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),C&&C.state!==t&&(d(C,"display",t?"none":""),t||C.state&&(e.options.group.revertClone?(E.insertBefore(C,N),e._animate(x,C)):E.insertBefore(C,x)),C.state=t)}function a(e,t,a){if(e){a=a||V;do{if(">*"===t&&e.parentNode===a||b(e,t))return e}while(e=n(e))}return null}function n(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function s(e,t,a){e.addEventListener(t,a,Z)}function o(e,t,a){e.removeEventListener(t,a,Z)}function l(e,t,a){if(e)if(e.classList)e.classList[a?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(H," ").replace(" "+t+" "," ");e.className=(r+(a?" "+t:"")).replace(H," ")}}function d(e,t,a){var r=e&&e.style;if(r){if(void 0===a)return V.defaultView&&V.defaultView.getComputedStyle?a=V.defaultView.getComputedStyle(e,""):e.currentStyle&&(a=e.currentStyle),void 0===t?a:a[t];t in r||(t="-webkit-"+t),r[t]=a+("string"==typeof a?"":"px")}}function c(e,t,a){if(e){var r=e.getElementsByTagName(t),n=0,i=r.length;if(a)for(;n<i;n++)a(r[n],n);return r}return[]}function u(e,t,a,r,n,i,s){e=e||t[q];var o=V.createEvent("Event"),l=e.options,d="on"+a.charAt(0).toUpperCase()+a.substr(1);o.initEvent(a,!0,!0),o.to=t,o.from=n||t,o.item=r||t,o.clone=C,o.oldIndex=i,o.newIndex=s,t.dispatchEvent(o),l[d]&&l[d].call(e,o)}function p(e,t,a,r,n,i,s){var o,l,d=e[q],c=d.options.onMove;return o=V.createEvent("Event"),o.initEvent("move",!0,!0),o.to=t,o.from=e,o.dragged=a,o.draggedRect=r,o.related=n||t,o.relatedRect=i||t.getBoundingClientRect(),e.dispatchEvent(o),c&&(l=c.call(d,o,s)),l}function f(e){e.draggable=!1}function h(){te=!1}function v(e,t){var a=e.lastElementChild,r=a.getBoundingClientRect();return(t.clientY-(r.top+r.height)>5||t.clientX-(r.right+r.width)>5)&&a}function g(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,a=t.length,r=0;a--;)r+=t.charCodeAt(a);return r.toString(36)}function m(e,t){var a=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!b(e,t)||a++;return a}function b(e,t){if(e){t=t.split(".");var a=t.shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==a&&e.nodeName.toUpperCase()!=a||t.length&&((" "+e.className+" ").match(r)||[]).length!=t.length)}return!1}function _(e,t){var a,r;return function(){void 0===a&&(a=arguments,r=this,setTimeout(function(){1===a.length?e.call(r,a[0]):e.apply(r,a),a=void 0},t))}}function y(e,t){if(e&&t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function D(e){return J?J(e).clone(!0)[0]:K&&K.dom?K.dom(e).cloneNode(!0):e.cloneNode(!0)}function w(e){for(var t=e.getElementsByTagName("input"),a=t.length;a--;){var r=t[a];r.checked&&ne.push(r)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var x,T,S,C,E,N,k,B,P,O,R,M,Y,X,A,F,I,$,L,U,j={},H=/\s+/g,W=/left|right|inline/,q="Sortable"+(new Date).getTime(),G=window,V=G.document,z=G.parseInt,J=r||G.Zepto,K=G.Polymer,Z=!1,Q=!!("draggable"in V.createElement("div")),ee=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=V.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),te=!1,ae=Math.abs,re=Math.min,ne=[],ie=[],se=_(function(e,t,a){if(a&&t.scroll){var r,n,i,s,o,l,d=a[q],c=t.scrollSensitivity,u=t.scrollSpeed,p=e.clientX,f=e.clientY,h=window.innerWidth,v=window.innerHeight;if(P!==a&&(B=t.scroll,P=a,O=t.scrollFn,!0===B)){B=a;do{if(B.offsetWidth<B.scrollWidth||B.offsetHeight<B.scrollHeight)break}while(B=B.parentNode)}B&&(r=B,n=B.getBoundingClientRect(),i=(ae(n.right-p)<=c)-(ae(n.left-p)<=c),s=(ae(n.bottom-f)<=c)-(ae(n.top-f)<=c)),i||s||(i=(h-p<=c)-(p<=c),s=(v-f<=c)-(f<=c),(i||s)&&(r=G)),j.vx===i&&j.vy===s&&j.el===r||(j.el=r,j.vx=i,j.vy=s,clearInterval(j.pid),r&&(j.pid=setInterval(function(){if(l=s?s*u:0,o=i?i*u:0,"function"==typeof O)return O.call(d,o,l,e);r===G?G.scrollTo(G.pageXOffset+o,G.pageYOffset+l):(r.scrollTop+=l,r.scrollLeft+=o)},24)))}},30),oe=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=a.name),"function"==typeof e?e:function(a,r){var n=r.options.group.name;return t?e:e&&(e.join?e.indexOf(n)>-1:n==e)}}var a={},r=e.group;r&&"object"==typeof r||(r={name:r}),a.name=r.name,a.checkPull=t(r.pull,!0),a.checkPut=t(r.put),a.revertClone=r.revertClone,e.group=a};e.prototype={constructor:e,_onTapStart:function(e){var t,r=this,n=this.el,i=this.options,s=i.preventOnFilter,o=e.type,l=e.touches&&e.touches[0],d=(l||e).target,c=e.target.shadowRoot&&e.path[0]||d,p=i.filter;if(w(n),!x&&!("mousedown"===o&&0!==e.button||i.disabled)&&(d=a(d,i.draggable,n))&&k!==d){if(t=m(d,i.draggable),"function"==typeof p){if(p.call(this,e,d,this))return u(r,c,"filter",d,n,t),void(s&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=a(c,e.trim(),n))return u(r,e,"filter",d,n,t),!0})))return void(s&&e.preventDefault());i.handle&&!a(c,i.handle,n)||this._prepareDragStart(e,l,d,t)}},_prepareDragStart:function(e,t,a,r){var n,i=this,o=i.el,d=i.options,p=o.ownerDocument;a&&!x&&a.parentNode===o&&($=e,E=o,x=a,T=x.parentNode,N=x.nextSibling,k=a,F=d.group,X=r,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,x.style["will-change"]="transform",n=function(){i._disableDelayedDrag(),x.draggable=i.nativeDraggable,l(x,d.chosenClass,!0),i._triggerDragStart(e,t),u(i,E,"choose",x,E,X)},d.ignore.split(",").forEach(function(e){c(x,e.trim(),f)}),s(p,"mouseup",i._onDrop),s(p,"touchend",i._onDrop),s(p,"touchcancel",i._onDrop),s(p,"pointercancel",i._onDrop),s(p,"selectstart",i),d.delay?(s(p,"mouseup",i._disableDelayedDrag),s(p,"touchend",i._disableDelayedDrag),s(p,"touchcancel",i._disableDelayedDrag),s(p,"mousemove",i._disableDelayedDrag),s(p,"touchmove",i._disableDelayedDrag),s(p,"pointermove",i._disableDelayedDrag),i._dragStartTimer=setTimeout(n,d.delay)):n())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag),o(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),t?($={target:x,clientX:t.clientX,clientY:t.clientY},this._onDragStart($,"touch")):this.nativeDraggable?(s(x,"dragend",this),s(E,"dragstart",this._onDragStart)):this._onDragStart($,!0);try{V.selection?setTimeout(function(){V.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(E&&x){var t=this.options;l(x,t.ghostClass,!0),l(x,t.dragClass,!1),e.active=this,u(this,E,"start",x,E,X)}else this._nulling()},_emulateDragOver:function(){if(L){if(this._lastX===L.clientX&&this._lastY===L.clientY)return;this._lastX=L.clientX,this._lastY=L.clientY,ee||d(S,"display","none");var e=V.elementFromPoint(L.clientX,L.clientY),t=e,a=ie.length;if(t)do{if(t[q]){for(;a--;)ie[a]({clientX:L.clientX,clientY:L.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);ee||d(S,"display","")}},_onTouchMove:function(t){if($){var a=this.options,r=a.fallbackTolerance,n=a.fallbackOffset,i=t.touches?t.touches[0]:t,s=i.clientX-$.clientX+n.x,o=i.clientY-$.clientY+n.y,l=t.touches?"translate3d("+s+"px,"+o+"px,0)":"translate("+s+"px,"+o+"px)";if(!e.active){if(r&&re(ae(i.clientX-this._lastX),ae(i.clientY-this._lastY))<r)return;this._dragStarted()}this._appendGhost(),U=!0,L=i,d(S,"webkitTransform",l),d(S,"mozTransform",l),d(S,"msTransform",l),d(S,"transform",l),t.preventDefault()}},_appendGhost:function(){if(!S){var e,t=x.getBoundingClientRect(),a=d(x),r=this.options;S=x.cloneNode(!0),l(S,r.ghostClass,!1),l(S,r.fallbackClass,!0),l(S,r.dragClass,!0),d(S,"top",t.top-z(a.marginTop,10)),d(S,"left",t.left-z(a.marginLeft,10)),d(S,"width",t.width),d(S,"height",t.height),d(S,"opacity","0.8"),d(S,"position","fixed"),d(S,"zIndex","100000"),d(S,"pointerEvents","none"),r.fallbackOnBody&&V.body.appendChild(S)||E.appendChild(S),e=S.getBoundingClientRect(),d(S,"width",2*t.width-e.width),d(S,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var a=e.dataTransfer,r=this.options;this._offUpEvents(),F.checkPull(this,this,x,e)&&(C=D(x),C.draggable=!1,C.style["will-change"]="",d(C,"display","none"),l(C,this.options.chosenClass,!1),E.insertBefore(C,x),u(this,E,"clone",x)),l(x,r.dragClass,!0),t?("touch"===t?(s(V,"touchmove",this._onTouchMove),s(V,"touchend",this._onDrop),s(V,"touchcancel",this._onDrop),s(V,"pointermove",this._onTouchMove),s(V,"pointerup",this._onDrop)):(s(V,"mousemove",this._onTouchMove),s(V,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(a&&(a.effectAllowed="move",r.setData&&r.setData.call(this,a,x)),s(V,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(r){var n,i,s,o,l=this.el,c=this.options,u=c.group,f=e.active,g=F===u,m=!1,b=c.sort;if(void 0!==r.preventDefault&&(r.preventDefault(),!c.dragoverBubble&&r.stopPropagation()),!x.animated&&(U=!0,f&&!c.disabled&&(g?b||(o=!E.contains(x)):I===this||(f.lastPullMode=F.checkPull(this,f,x,r))&&u.checkPut(this,f,x,r))&&(void 0===r.rootEl||r.rootEl===this.el))){if(se(r,c,this.el),te)return;if(n=a(r.target,c.draggable,l),i=x.getBoundingClientRect(),I!==this&&(I=this,m=!0),o)return t(f,!0),T=E,void(C||N?E.insertBefore(x,C||N):b||E.appendChild(x));if(0===l.children.length||l.children[0]===S||l===r.target&&(n=v(l,r))){if(n){if(n.animated)return;s=n.getBoundingClientRect()}t(f,g),!1!==p(E,l,x,i,n,s,r)&&(x.contains(l)||(l.appendChild(x),T=l),this._animate(i,x),n&&this._animate(s,n))}else if(n&&!n.animated&&n!==x&&void 0!==n.parentNode[q]){R!==n&&(R=n,M=d(n),Y=d(n.parentNode)),s=n.getBoundingClientRect();var _=s.right-s.left,y=s.bottom-s.top,D=W.test(M.cssFloat+M.display)||"flex"==Y.display&&0===Y["flex-direction"].indexOf("row"),w=n.offsetWidth>x.offsetWidth,k=n.offsetHeight>x.offsetHeight,B=(D?(r.clientX-s.left)/_:(r.clientY-s.top)/y)>.5,P=n.nextElementSibling,O=p(E,l,x,i,n,s,r),X=!1;if(!1!==O){if(te=!0,setTimeout(h,30),t(f,g),1===O||-1===O)X=1===O;else if(D){var A=x.offsetTop,$=n.offsetTop;X=A===$?n.previousElementSibling===x&&!w||B&&w:n.previousElementSibling===x||x.previousElementSibling===n?(r.clientY-s.top)/y>.5:$>A}else m||(X=P!==x&&!k||B&&k);x.contains(l)||(X&&!P?l.appendChild(x):n.parentNode.insertBefore(x,X?P:n)),T=x.parentNode,this._animate(i,x),this._animate(s,n)}}}},_animate:function(e,t){var a=this.options.animation;if(a){var r=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),d(t,"transition","none"),d(t,"transform","translate3d("+(e.left-r.left)+"px,"+(e.top-r.top)+"px,0)"),t.offsetWidth,d(t,"transition","all "+a+"ms"),d(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){d(t,"transition",""),d(t,"transform",""),t.animated=!1},a)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(V,"touchmove",this._onTouchMove),o(V,"pointermove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"pointerup",this._onDrop),o(e,"touchcancel",this._onDrop),o(e,"selectstart",this)},_onDrop:function(t){var a=this.el,r=this.options;clearInterval(this._loopId),clearInterval(j.pid),clearTimeout(this._dragStartTimer),o(V,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(V,"drop",this),o(a,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(U&&(t.preventDefault(),!r.dropBubble&&t.stopPropagation()),S&&S.parentNode.removeChild(S),E!==T&&"clone"===e.active.lastPullMode||C&&C.parentNode.removeChild(C),x&&(this.nativeDraggable&&o(x,"dragend",this),f(x),x.style["will-change"]="",l(x,this.options.ghostClass,!1),l(x,this.options.chosenClass,!1),E!==T?(A=m(x,r.draggable))>=0&&(u(null,T,"add",x,E,X,A),u(this,E,"remove",x,E,X,A),u(null,T,"sort",x,E,X,A),u(this,E,"sort",x,E,X,A)):x.nextSibling!==N&&(A=m(x,r.draggable))>=0&&(u(this,E,"update",x,E,X,A),u(this,E,"sort",x,E,X,A)),e.active&&(null!=A&&-1!==A||(A=X),u(this,E,"end",x,E,X,A),this.save()))),this._nulling()},_nulling:function(){E=x=T=S=N=C=k=B=P=$=L=U=A=R=M=I=F=e.active=null,ne.forEach(function(e){e.checked=!0}),ne.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":x&&(this._onDragOver(e),i(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,n=0,i=r.length,s=this.options;n<i;n++)e=r[n],a(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||g(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,n){var i=r.children[n];a(i,this.options.draggable,r)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return a(e,t||this.options.draggable,this.el)},option:function(e,t){var a=this.options;if(void 0===t)return a[e];a[e]=t,"group"===e&&oe(a)},destroy:function(){var e=this.el;e[q]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),o(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),ie.splice(ie.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},s(V,"touchmove",function(t){e.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Z={capture:!1,passive:!1}}}))}catch(e){}return e.utils={on:s,off:o,css:d,find:c,is:function(e,t){return!!a(e,t,e)},extend:y,throttle:_,closest:a,toggleClass:l,clone:D,index:m},e.create=function(t,a){return new e(t,a)},e.version="1.5.1",e})}).call(t,a(2))},function(e,t,a){e.exports=a(0)(1)},function(e,t,a){e.exports=a(0)(12)},function(e,t,a){e.exports=a(0)(135)},function(e,t,a){e.exports=a(0)(3)},function(e,t,a){e.exports=a(0)(4)},function(e,t,a){e.exports=a(0)(63)},function(e,t,a){e.exports=a(0)(7)},function(e,t,a){e.exports=a}]);