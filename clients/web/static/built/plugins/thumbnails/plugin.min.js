var girder_plugin_thumbnails=function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(7),e(e.s=32)}([function(t,e){t.exports=girder_lib},function(t,e,i){t.exports=i(0)(0)},function(t,e,i){t.exports=i(0)(3)},function(t,e,i){t.exports=i(0)(1)},function(t,e,i){t.exports=i(0)(2)},function(t,e,i){t.exports=i(0)(63)},function(t,e,i){t.exports=i(0)(8)},function(t,e,i){"use strict";i(10),i(12)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(23),a=function(t){return t&&t.__esModule?t:{default:t}}(n),s=a.default.extend({resourceName:"thumbnail"});e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(2),s=n(a),l=i(24),c=n(l),r=i(3),o=n(r);i(21),i(20);var u=i(8),d=n(u),h=i(13),f=n(h),m=i(14),g=n(m);i(18);var b=o.default.extend({events:{'change .g-thumbnail-attach-container input[type="radio"]':function(){this.$(".g-target-result-container").empty(),this.$(".g-thumbnail-attach-this-item").is(":checked")?(this.attachToType="item",this.attachToId=this.item.id,this.$(".g-thumbnail-custom-target-container").addClass("hide"),this.$(".g-submit-create-thumbnail").girderEnable(!0)):(this.attachToType=null,this.attachToId=null,this.$(".g-thumbnail-custom-target-container").removeClass("hide"),this.$(".g-submit-create-thumbnail").girderEnable(!1))},"submit #g-create-thumbnail-form":function(t){t.preventDefault(),this.$(".g-validation-failed-message").empty(),this.$(".g-submit-create-thumbnail").girderEnable(!1),new d.default({width:Number(this.$("#g-thumbnail-width").val())||0,height:Number(this.$("#g-thumbnail-height").val())||0,crop:this.$("#g-thumbnail-crop").is(":checked"),fileId:this.file.id,attachToId:this.attachToId,attachToType:this.attachToType}).on("g:saved",function(){this.$el.on("hidden.bs.modal",s.default.bind(function(){this.trigger("g:created",{attachedToType:this.attachToType,attachedToId:this.attachToId})},this)).modal("hide")},this).on("g:error",function(t){this.$(".g-submit-create-thumbnail").girderEnable(!0),this.$(".g-validation-failed-message").text(t.responseJSON.message)},this).save()}},initialize:function(t){this.item=t.item,this.file=t.file,this.attachToType="item",this.attachToId=this.item.id,this.searchWidget=new c.default({placeholder:"Start typing a name...",types:["collection","folder","item","user"],parentView:this}).on("g:resultClicked",this.pickTarget,this)},render:function(){var t=this;return this.$el.html((0,f.default)({file:this.file,item:this.item})).girderModal(this).on("shown.bs.modal",function(){t.$("#g-thumbnail-width").focus()}),this.$("#g-thumbnail-width").focus(),this.searchWidget.setElement(this.$(".g-search-field-container")).render(),this},pickTarget:function(t){this.searchWidget.resetState(),this.attachToType=t.type,this.attachToId=t.id,this.$(".g-submit-create-thumbnail").girderEnable(!0),this.$(".g-target-result-container").html((0,g.default)({text:t.text,icon:t.icon}))}});e.default=b},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=i(4),s=n(a),l=i(22),c=n(l),r=i(31),o=n(r),u=i(29),d=n(u),h=i(6),f=i(5),m=i(15),g=n(m),b=i(9),p=n(b);(0,f.wrap)(o.default,"render",function(t){return t.call(this),this.parentItem.getAccessLevel()>=h.AccessType.WRITE&&this.$(".g-file-actions-container").prepend((0,g.default)()),this}),o.default.prototype.events["click a.g-create-thumbnail"]=function(t){var e=(0,s.default)(t.currentTarget).parent().attr("file-cid");new p.default({el:(0,s.default)("#g-dialog-container"),parentView:this,item:this.parentItem,file:this.collection.get(e)}).once("g:created",function(t){c.default.history.fragment=null,d.default.navigate(t.attachedToType+"/"+t.attachedToId,{trigger:!0})},this).render()}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=n(a),l=i(2),c=n(l),r=i(25),o=n(r),u=i(3),d=n(u),h=i(6),f=i(28),m=i(26),g=n(m),b=i(16),p=n(b);i(19);var v=d.default.extend({events:{"click .g-thumbnail-delete":function(t){var e=(0,s.default)(t.currentTarget).parents(".g-thumbnail-container"),i=new o.default({_id:e.attr("g-file-id")});(0,f.confirm)({text:"Are you sure you want to delete this thumbnail?",yesText:"Delete",confirmCallback:c.default.bind(function(){i.on("g:deleted",function(){e.remove()}).on("g:error",function(){g.default.trigger("g:alert",{icon:"cancel",text:"Failed to delete thumbnail.",type:"danger",timeout:4e3})}).destroy()},this)})},"mouseenter .g-thumbnail-container":function(){this.$(".g-thumbnail-actions-container").addClass("g-show")},"mouseleave .g-thumbnail-container":function(){this.$(".g-thumbnail-actions-container").removeClass("g-show")}},initialize:function(t){this.thumbnails=t.thumbnails,this.accessLevel=t.accessLevel||h.AccessType.READ},render:function(){return this.$el.html((0,p.default)({thumbnails:this.thumbnails.toArray(),accessLevel:this.accessLevel,AccessType:h.AccessType})),this}});e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=n(a),l=i(27),c=n(l),r=i(30),o=n(r),u=i(5),d=i(17),h=n(d),f=i(11),m=n(f);(0,u.wrap)(o.default,"render",function(t){this.once("g:rendered",function(){var t=new c.default(s.default.map(this.model.get("_thumbnails"),function(t){return{_id:t}}));t&&t.length&&(this.$(".g-item-info").before((0,h.default)()),new m.default({className:"g-thumbnails-flow-view-container",parentView:this,thumbnails:t,accessLevel:this.model.getAccessLevel()}).render().$el.insertBefore(this.$(".g-item-info")))},this),t.call(this)})},function(t,e,i){"use strict";function n(t){var e,i="",n=t||{};return function(t){i=i+'<div class="modal-dialog"><div class="modal-content"><form class="modal-form" id="g-create-thumbnail-form" role="form"><div class="modal-header"><button class="close" data-dismiss="modal" aria-hidden="true" type="button">&times;</button><h4 class="modal-title">Create thumbnail</h4><div class="g-dialog-subtitle"><i class="icon-doc-inv"></i> '+a.escape(null==(e=t.get("name"))?"":e)+'</div></div><div class="modal-body"><label>Thumbnail size (px)</label><div class="g-thumbnail-size-form-container"><input class="g-thumbnail-size-input" id="g-thumbnail-width" placeholder="width"><span class="g-thumbnail-size-between">&times;</span><input class="g-thumbnail-size-input" id="g-thumbnail-height" placeholder="height"><label class="g-thumbnail-crop-container checkbox-inline"><input id="g-thumbnail-crop" type="checkbox">Crop</label></div><label>Attach to<div class="g-thumbnail-attach-container"><label class="radio-inline"><input class="g-thumbnail-attach-this-item" type="radio" name="g-thumbnail-attach-to" checked="on">This item</label><label class="radio-inline"><input class="g-thumbnail-attach-something-else" type="radio" name="g-thumbnail-attach-to">Something else...</label></div></label><div class="g-thumbnail-custom-target-container hide"><div class="g-target-result-container"></div><div class="g-search-field-container"></div></div><div class="g-validation-failed-message"></div></div><div class="modal-footer"><a class="btn btn-small btn-default" data-dismiss="modal">Close</a><button class="g-submit-create-thumbnail btn btn-small btn-primary" type="submit"><i class="icon-picture"></i> Create</button></div></form></div></div>'}.call(this,"file"in n?n.file:"undefined"!=typeof file?file:void 0),i}var a=i(1);t.exports=n},function(t,e,i){"use strict";function n(t){var e,i="",n=t||{};return function(t,n){i=i+'<div class="g-target-result"><i'+a.attr("class",a.classes(["icon-"+t],[!0]),!1,!0)+"></i> "+a.escape(null==(e=n)?"":e)+"</div>"}.call(this,"icon"in n?n.icon:"undefined"!=typeof icon?icon:void 0,"text"in n?n.text:"undefined"!=typeof text?text:void 0),i}var a=i(1);t.exports=n},function(t,e,i){"use strict";function n(t){var e="";return e+='<a class="g-create-thumbnail" title="Create thumbnail of this file"><i class="icon-picture"></i></a>'}i(1);t.exports=n},function(t,e,i){"use strict";function n(t){var e="",i=t||{};return function(t,i,n){e+='<div class="g-thumbnail-flow-container">',function(){var s=n;if("number"==typeof s.length)for(var l=0,c=s.length;l<c;l++){var r=s[l];e=e+'<div class="g-thumbnail-container"'+a.attr("g-file-id",r.id,!0,!0)+">",i>=t.WRITE&&(e+='<div class="g-thumbnail-actions-container"><a class="g-thumbnail-delete" title="Delete"><i class="icon-cancel"></i></a></div>'),e=e+'<img class="g-thumbnail"'+a.attr("src",r.downloadUrl(),!0,!0)+"></div>"}else{var c=0;for(var l in s){c++;var r=s[l];e=e+'<div class="g-thumbnail-container"'+a.attr("g-file-id",r.id,!0,!0)+">",i>=t.WRITE&&(e+='<div class="g-thumbnail-actions-container"><a class="g-thumbnail-delete" title="Delete"><i class="icon-cancel"></i></a></div>'),e=e+'<img class="g-thumbnail"'+a.attr("src",r.downloadUrl(),!0,!0)+"></div>"}}}.call(this),e+="</div>"}.call(this,"AccessType"in i?i.AccessType:"undefined"!=typeof AccessType?AccessType:void 0,"accessLevel"in i?i.accessLevel:"undefined"!=typeof accessLevel?accessLevel:void 0,"thumbnails"in i?i.thumbnails:"undefined"!=typeof thumbnails?thumbnails:void 0),e}var a=i(1);t.exports=n},function(t,e,i){"use strict";function n(t){var e="";return e+='<div class="g-thumbnails-header-container"><div class="g-item-info-header"><i class="icon-picture"></i>Thumbnails</div></div>'}i(1);t.exports=n},function(t,e){},function(t,e){},function(t,e,i){t.exports=i(0)(11)},function(t,e,i){t.exports=i(0)(12)},function(t,e,i){t.exports=i(0)(15)},function(t,e,i){t.exports=i(0)(20)},function(t,e,i){t.exports=i(0)(21)},function(t,e,i){t.exports=i(0)(32)},function(t,e,i){t.exports=i(0)(5)},function(t,e,i){t.exports=i(0)(58)},function(t,e,i){t.exports=i(0)(6)},function(t,e,i){t.exports=i(0)(7)},function(t,e,i){t.exports=i(0)(75)},function(t,e,i){t.exports=i(0)(95)},function(t,e,i){t.exports=i}]);